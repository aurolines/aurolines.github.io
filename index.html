<!DOCTYPE html><html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Divyansh Maghanani | Author</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* your custom styles (same as before) */
        :root {
            --navy: #1a1a2e;
            --plum: #3b0a45;
            --mauve: #4e2758;
            --soft-pink: #ffd6eb;
            --pale-lavender: #e6d7f2;
        }
        /* ... all your CSS remains unchanged ... */
    </style>
</head>
<body>
    <!-- existing HTML content remains unchanged --><!-- your main sections: stars, scroll bar, hero, quote, books, about, cta, footer -->

<script>
    const starsContainer = document.querySelector('.stars');
    const starCount = 50;

    for (let i = 0; i < starCount; i++) {
        const star = document.createElement('div');
        star.classList.add('star');

        const x = Math.random() * 100;
        const y = Math.random() * 100;
        const size = Math.random() * 1.5 + 0.5;

        star.style.left = x + "%";
        star.style.top = y + "%";
        star.style.width = size + "px";
        star.style.height = size + "px";
        star.style.opacity = Math.random() * 0.7 + 0.3;

        starsContainer.appendChild(star);
    }

    let lastScrollTime = 0;
    const scrollThrottle = 10;

    window.addEventListener('scroll', () => {
        const now = Date.now();
        if (now - lastScrollTime > scrollThrottle) {
            lastScrollTime = now;
            updateScrollProgress();
            updateCinematicBars();
            checkElementsInView();
        }
    }, { passive: true });

    function updateScrollProgress() {
        const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
        const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        const scrolled = (winScroll / height) * 100;
        document.querySelector(".progress-bar").style.width = scrolled + "%";
    }

    function updateCinematicBars() {
        const scrollPosition = window.scrollY;
        const windowHeight = window.innerHeight;
        const documentHeight = document.documentElement.scrollHeight;

        const barHeight = Math.min(20, scrollPosition / 20);
        document.querySelector('.cinematic-top').style.height = barHeight + "px";
        document.querySelector('.cinematic-bottom').style.height = barHeight + "px";

        if (scrollPosition < 50 || scrollPosition > documentHeight - windowHeight - 50) {
            document.querySelector('.cinematic-top').style.height = '0';
            document.querySelector('.cinematic-bottom').style.height = '0';
        }
    }

    function checkElementsInView() {
        const reveals = document.querySelectorAll('.reveal');
        const windowHeight = window.innerHeight;

        reveals.forEach(element => {
            const elementTop = element.getBoundingClientRect().top;
            const elementVisible = 150;

            if (elementTop < windowHeight - elementVisible) {
                element.classList.add('active');
            } else {
                element.classList.remove('active');
            }
        });

        const quote = document.getElementById('animated-quote');
        if (quote) {
            const quoteTop = quote.getBoundingClientRect().top;
            const quoteBottom = quote.getBoundingClientRect().bottom;

            if (quoteTop < windowHeight && quoteBottom > 0) {
                animateQuoteText(true);
            } else {
                animateQuoteText(false);
            }
        }
    }

    function setupQuoteAnimation() {
        const quote = document.getElementById('animated-quote');
        if (!quote || quote.dataset.animated === 'true') return;

        const text = quote.textContent.trim();
        quote.innerHTML = '';
        quote.dataset.animated = 'true';

        for (let i = 0; i < text.length; i++) {
            if (text[i] === ' ') {
                const space = document.createElement('span');
                space.classList.add('animated-space');
                quote.appendChild(space);
            } else {
                const span = document.createElement('span');
                span.classList.add('animated-text');
                span.textContent = text[i];
                span.style.transitionDelay = (i * 0.02) + "s";
                quote.appendChild(span);
            }
        }
    }

    function animateQuoteText(isVisible) {
        const spans = document.querySelectorAll('#animated-quote .animated-text');

        if (isVisible) {
            spans.forEach((span, index) => {
                setTimeout(() => {
                    span.classList.add('active');
                }, index * 20);
            });
        } else {
            spans.forEach(span => {
                span.classList.remove('active');
            });
        }
    }

    // Initialize after DOM is loaded
    document.addEventListener('DOMContentLoaded', () => {
        setupQuoteAnimation();
        checkElementsInView();
    });
</script>

</body>
</html>
